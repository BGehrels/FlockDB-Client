<!---
Copyright 2012 Benjamin Gehrels

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--->
FlockDBClient
=============

*FlockDB Client* is a lightweight, idiomatic Java wrapper around the Thrift API of FlockDB, providing fluent interface
based access. You may call it a FlockDB Java driver.

Why should i use this Wrapper?
---------------------------

FlockDB uses  [Thrift](http://thrift.apache.org/ "Thrift") as it's remote communication technology. Thrift is a great
tool. It offers a simple way to create cross-platform binary remote communication APIs (RPC). But: The code generated by
Thrift is not what one would call a clean and beautiful API. Furthermore, FlockDB uses ByteBuffers a lot when it has to
send long[] over the wire, so you have to serialize and deserialize arguments yourself when using it.

This library tries to solve those issues. It provides you with builders for all the query methods supported by FlockDB,
an easy paging abstraction and a static import based, DSL-style approach to construct selection predicates.

How to get it
-------------
This library is written using Java 7 and will not work with prior Versions. If you are using Maven, you will (soon)
find this library on Maven Central. Just add the following dependency to your `pom.xml`:

	<dependency>
		<groupId>info.gehrels</groupId>
		<artifactId>FlockDB-Client</artifactId>
		<version>0.1-SNAPSHOT</version>
	</dependency>

If you do not use Maven as your build and dependency management tool, you may download the library from
[Maven Central](http://search.maven.org/#search|ga|1|flockdb%20client). You then also have to make sure to have all
dependencies in your classpath. At the moment of writing this documentation, these are
* libthrift = 0.8.0
* Google guava >= 13.0-rc2

Other versions may work, but are untested. If you tested one, please feel free to contribute your experiences to this
README file.

How to build it
---------------
If you want to build this library yourself, you will need some prerequisites:
* A Java JDK 7 or higher
* Maven 2.0 or higher
* Thrift 0.8.0 - the path to the Thrift binary must be in your `$PATH`/`%PATH%`, otherwise the Maven Plugin won't find it.

You can build it by entering `mvn package` from inside this directory. The binary `.jar`-file will then be found under
in the `target` directory.

How to use it
-------------
The primary entry point to the FlockDB Client is the class called `info.gehrels.flockDBClient.FlockDB`. You may simply
instantiate it using a the hostName and the port of your running FlockDB server:

	FlockDB myFlockConnection = new FlockDB("localhost", 7915);

Once you have a `FlockDB` instance at your fingertips, you may use it for all the operations provided by the server. The
first thing you may want to do is adding nodes to your instance:

	myFlockConnection.batchExecution(Priority.Normal)
		.add(1, 2, new Date().getTime(), OUTGOING, 3)
		.add(3, 2, new Date().getTime(), OUTGOING, 4)
		.add(4, 2, new Date().getTime(), OUTGOING, 1)
		.execute();

This will add three edges, each one labeled with the current time to graph no. 2: one from node 1 to node 3, one from node 3
to node 4 and one from node 4 to node 1. Together, they form a triangle. You mach also use batch executions to remove,
negate and archive edges or to add multiple edges at once:

	myFlockConnection.batchExecution(Priority.Normal)
		.add(1, 2, new Date().getTime(), OUTGOING, 3, 4, 5, 6) // Adds 4 edges: 1->3, 1->4, 1->5, 1->6
		.negate(1, 2, OUTGOING, 4, 5) // negates edges 1->4, 1->5
		.archive(3, 2, INCOMING, 1) // archives edge 1->3
		.remove(1, 2, OUTGOING, 6) // removes edge 1->6
		.execute();